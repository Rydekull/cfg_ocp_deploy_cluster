# This is an example of a bring your own (byo) host inventory for a cluster
# with natively hosted, containerized GlusterFS storage for applications. It
# will also autmatically create a StorageClass for this purpose.
#
# This inventory may be used with the byo/config.yml playbook to deploy a new
# cluster with GlusterFS storage.
#
# This inventory may also be used with byo/openshift-glusterfs/config.yml to
# deploy GlusterFS storage on an existing cluster.
#
# There are additional configuration parameters that can be specified to
# control the deployment and state of a GlusterFS cluster. Please see the
# documentation in playbooks/byo/openshift-glusterfs/README.md and
# roles/openshift_storage_glusterfs/README.md for additional details.

# Specify the glusterfs group, which contains the nodes that will host
# GlusterFS storage pods. At a minimum, each node must have a
# "glusterfs_devices" variable defined. This variable is a list of block
# devices the node will have access to that is intended solely for use as
# GlusterFS storage. These block devices must be bare (e.g. have no data, not
# be marked as LVM PVs), and will be formatted.

[OSEv3:children]
masters
nodes
#etcd
#new_nodes
#glusterfs

[OSEv3:vars]
ansible_user=ec2-user
ansible_become=yes
openshift_disable_check=disk_availability,docker_image_availability,docker_storage,memory_availability,package_availability,package_version
deployment_type=openshift-enterprise
containerized=true
openshift_release=v3.6
openshift_image_tag=v3.6.173.0.49
openshift_master_identity_providers=[{'name': 'htpasswd_auth', 'login': 'true', 'challenge': 'true', 'kind': 'HTPasswdPasswordIdentityProvider', 'filename': '/etc/origin/master/htpasswd'}]
openshift_master_htpasswd_file={{ inventory_dir }}/../templates/htpasswd
#openshift_master_cluster_method=native
#openshift_master_cluster_hostname=master-internal.example.com
#openshift_master_cluster_public_hostname=omaster.example.com
#osm_cluster_network_cidr=10.128.0.0/14
#openshift_portal_net=172.30.0.0/16
# Provide local certificate paths which will be deployed to masters
#openshift_master_named_certificates=[{"certfile": "/root/openshift.crt", "keyfile": "/root/openshift.key", "cafile": "/root/ca-chain.pem"}]
#openshift_master_overwrite_named_certificates=true
#openshift_hosted_router_certificate={"certfile": "/root/wildcard.crt", "keyfile": "/root/wildcard.key", 'cafile': '/root/ca-chain.pem' }
# Install the openshift examples
openshift_install_examples=true
#Audit logging
#openshift_master_audit_config={"basicAuditEnabled": true}
#openshift_master_audit_config={"enabled": true, "auditFilePath": "/var/log/openpaas-oscp-audit/openpaas-oscp-audit.log", "maximumFileRetentionDays": 14, "maximumFileSizeMegabytes": 500, "maximumRetainedFiles": 5}
openshift_node_kubelet_args={'image-gc-high-threshold': ['90'], 'image-gc-low-threshold': ['80']}
openshift_master_default_subdomain=example.com
openshift_router_selector='infra=true'
openshift_registry_selector='infra=true'
os_sdn_network_plugin_name='redhat/openshift-ovs-multitenant'
openshift_hosted_metrics_deploy=true
openshift_metrics_install_metrics=true
openshift_metrics_start_cluster=True
#openshift_metrics_hawkular_hostname=hawkular-metrics.apps.example.com
openshift_metrics_cassandra_limits_memory=1Gi
openshift_metrics_hawkular_limits_memory=2Gi
openshift_metrics_heapster_limits_memory=1Gi
#openshift_metrics_image_version=v3.6.173.0.5
openshift_metrics_cassandra_nodeselector={"infra":"true"}
openshift_metrics_hawkular_nodeselector={"infra":"true"}
openshift_metrics_heapster_nodeselector={"infra":"true"}
openshift_metrics_hawkular_agent_nodeselector={"infra":"true"}
# Set upgrade restart mode for full system restarts
openshift_rolling_restart_mode=system

[masters]
master1.example.com
#master2.example.com


[etcd]
#etcd1.example.com
#etcd2.example.com
#etcd3.example.com

[compute]
infra1.example.com openshift_node_labels="{'infra': 'true', 'zone': 'default'}" openshift_schedulable=True
compute1.example.com openshift_node_labels="{'node': 'true', 'zone': 'default'}" openshift_schedulable=True
compute2.com openshift_node_labels="{'node': 'true', 'zone': 'default'}" openshift_schedulable=True

#[glusterfs]
#infra1.example.com  glusterfs_devices='[ "/dev/vdb", "/dev/vdc", "/dev/vdd" ]'
#compute1.example.com  glusterfs_devices='[ "/dev/vdb", "/dev/vdc", "/dev/vdd" ]'
#compute2.example.com  glusterfs_devices='[ "/dev/vdb", "/dev/vdc", "/dev/vdd" ]'

[nodes:children]
masters
compute

[new_nodes]
#compute3.example.com openshift_node_labels="{'node': 'true', 'zone': 'default'}" openshift_schedulable=True
#compute4.example.com openshift_node_labels="{'node': 'true', 'zone': 'default'}" openshift_schedulable=True
